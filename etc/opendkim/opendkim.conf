# Enable logging for anything OpenDKIM considers "interesting activity".
Syslog yes

# Don't run OpenDKIM as the `root` user (the security principle of least
# privilege).
UserID opendkim

# Disallow anyone but OpenDKIM from accessing the files OpenDKIM creates.
UMask 0007

# Let Postfix communicate with OpenDKIM through port to give it mail to sign.
Socket inet:8891@localhost

# Only use OpenDKIM for signing our mail, not for verifying signatures. We
# configure Postfix to only give OpenDKIM messages from trusted senders, so this
# is fine.
Mode s

# Tell others to consider our messages untampered even when other servers modify
# our message headers (but not body) in strictly meaningless ways, such as by
# changing header name casing, line wrapping, or insignificant whitespace, as
# per RFC 6376 (section 3.4.2).
Canonicalization relaxed/simple

# The file at this path contains `*`, which tells OpenDKIM to sign messages from
# any domain. We configured Postfix to only give OpenDKIM messages from trusted
# senders, so this is fine.
Domain refile:/etc/opendkim/Domain

# Use the same DKIM selector name and private key path as the ones used in our
# `usr/local/bin/dkim` script.
Selector default
KeyFile /var/db/dkim/default.private
